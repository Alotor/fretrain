{
  "id": "Fretrain state",
  "initial": "WaitingNote",
  "states": {
    "WaitingNote": {
      "entry": {
        "type": "selectNote"
      },
      "on": {
        "note.selected": {
          "target": "WaitingString"
        }
      }
    },
    "WaitingString": {
      "entry": {
        "type": "selectString"
      },
      "on": {
        "string.selected": {
          "target": "StringProgress",
          "actions": {
            "type": "startTimer"
          }
        }
      }
    },
    "StringProgress": {
      "on": {
        "time": {
          "target": "StringProgress",
          "actions": {
            "type": "updateProgress"
          }
        },
        "select.fail": {
          "target": "StringFail"
        },
        "timeout": {
          "target": "StringFail"
        },
        "select.ok": {
          "target": "StringOK"
        }
      }
    },
    "StringFail": {
      "entry": {
        "type": "displayFail"
      },
      "always": {
        "target": "StringEnd"
      }
    },
    "StringOK": {
      "entry": {
        "type": "displayOK"
      },
      "always": {
        "target": "StringEnd"
      }
    },
    "StringEnd": {
      "entry": {
        "type": "stopTimer"
      },
      "always": [
        {
          "target": "WaitingString",
          "guard": "strings-left"
        },
        {
          "target": "TrainEnd"
        }
      ]
    },
    "TrainEnd": {
      "entry": {
        "type": "displayEnd"
      },
      "on": {
        "restart": {
          "target": "WaitingNote",
          "actions": {
            "type": "clearState"
          }
        }
      }
    },
    "New state 1": {}
  }
}
